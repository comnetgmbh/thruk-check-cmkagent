[% PROCESS _header.tt
        js           => []
        css          => [],
        extra_header => '',
%]

<style>
    tr td {
        text-align: left;
    }

    .added_notice {
        background-color: #92d950;
        padding: 10px;
        margin: 10px;
        margin-top: 20px;
        border-style: solid;
    }

    .added_notice > img {
        vertical-align: middle;
        padding-right: 10px;
    }
</style>

[% IF added %]
    <div class="added_notice">
        [% IF added.service.entity %]
            [% SET entity = ": $added.service.entity" %]
        [% END %]
        <img src="../themes/Thruk2/images/accept.png">Added service [% added.service.section %] for host[% entity %]
    </div>
[% END %]

<table class='status [% paneprefix %]_table' style="width: 100%">
    <tr>
        <th class="status col">Host</th>
        <th class="status col">Service</th>
        <th class="status col">Entity</th>
        <th class="status col">Threshold warning (%)</th>
        <th class="status col">Threshold critical (%)</th>
        <th class="status col">Generate</th>
    </tr>
        [% FOR host_name IN hosts.keys().sort() %]
            [% SET host = hosts.$host_name %]
            [% FOR service_id IN host.services.keys().sort() %]
                [% SET service = host.services.$service_id %]
                <form method="POST" action="check_cmkagent_add.cgi?host_name=[% host.name %]&service_id=[% service.id %]">
                    <tr>
                        <td>[% host.name %]</td>
                        <td>
                            [% service.section %]
                            [% IF service.specialization %]
                                ([% service.specialization %])
                            [% END %]
                        </td>
                        <td>[% service.entity %]</td>
                        <td><input type="text" name="warn"></td>
                        <td><input type="text" name="crit"></td>
                        <td><input type="submit" value="Generate"></td>
                        <td>[%# service.content.join('<br>') %]</td>
                    </tr>
                </form>
            [% END %]
        [% END %]
    </tbody>
</table>
